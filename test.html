<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Draggable Div</title>
<style>
  .draggableDiv {
    width: 200px;
    height: 200px;
    background-color: lightblue;
    position: absolute;
    cursor: grab;
  }
</style>
</head>
<body>

<button onclick="createDraggableDiv()">Create Draggable Div</button>

<script>
  let isDragging = false;
  let currentDiv;

  function createDraggableDiv() {
    const newDiv = document.createElement('div');
    newDiv.className = 'draggableDiv';
    newDiv.innerHTML = 'Drag me!';
    document.body.appendChild(newDiv);

    newDiv.addEventListener('mousedown', function(event) {
      isDragging = true;
      currentDiv = newDiv;
      const rect = currentDiv.getBoundingClientRect();
      const offsetX = event.clientX - rect.left;
      const offsetY = event.clientY - rect.top;

      document.addEventListener('mousemove', drag);
      document.addEventListener('mouseup', () => {
        isDragging = false;
        document.removeEventListener('mousemove', drag);
      });

      function drag(event) {
        event.preventDefault();
        let x = event.clientX - offsetX;
        let y = event.clientY - offsetY;

        // Adjust x coordinate to stay within the window width
        if (x < 0) {
          x = 0;
        } else if (x + newDiv.offsetWidth > window.innerWidth) {
          x = window.innerWidth - newDiv.offsetWidth;
        }

        // Adjust y coordinate to stay within the window height
        if (y < 0) {
          y = 0;
        } else if (y + newDiv.offsetHeight > window.innerHeight) {
          y = window.innerHeight - newDiv.offsetHeight;
        }

        currentDiv.style.left = `${x}px`;
        currentDiv.style.top = `${y}px`;
      }
    });
  }
</script>

</body>
</html>
